(function(t){"use strict";function e(e,i,a,r){this.$el=e;this.fullWidthContentColumns=i;this.fullWidthSections=r;this.$window=t(window);this.onMobile=false;this.clearIsoAnimation=null;this.mediaQuerySize="";this.fullscreenSelector=a;this.initialized=false;this.total=0;this.totalLoaded=0;this.mouseEventHandler();this.portfolioFiltersInit();this.portfolioInit();this.resizeHandler();if(this.$el.find('.inner-wrap[data-animation="perspective"]').length>0){this.perspectiveAnimationInit()}this.portfolioAccentColor();this.isotopeCatSelection();this.portfolioCommentOrder()}e.prototype.portfolioInit=function(){var e=this;this.total=this.$el.find("img").length;if(this.$el.parents(".wpb_gallery").length>0&&this.$el.find(".nectar-lazy").length>0){this.fullWidthSections();this.$el.find("img.nectar-lazy:not(.loaded)").each(function(){t(this).css({"height":"","width":""});var i=parseInt(t(this).attr("height"));var a=parseInt(t(this).attr("width"));var r=t(this).width();var n=e.imageAspectRatio(a,i,r,2e3);t(this).css({"height":n.height+"px","width":n.width+"px"})});this.masonryInit("0s");this.initialized=true;t(window).on("salient-portfolio-recalculate",this.imageLoadLayout.bind(this))}else{this.$el.imagesLoaded(function(){e.masonryInit("0.6s");e.initialized=true})}};e.prototype.imageLoadLayout=function(){this.totalLoaded=this.totalLoaded+1;if(this.initialized==true){this.$el.isotope("layout")}};e.prototype.imageAspectRatio=function(t,e,i,a){var r=Math.min(i/t,a/e);return{width:t*r,height:e*r}};e.prototype.masonryInit=function(e){var i=this;var a=i.$el.hasClass("masonry-items")?"packery":"fitRows";var r=i.$el.attr("data-starting-filter")!=""&&i.$el.attr("data-starting-filter")!="default"?"."+i.$el.attr("data-starting-filter"):"*";var n=t("body.rtl").length>0?false:true;i.beforeReLayout();i.$el.addClass("isotope-activated");i.$el.isotope({itemSelector:".element",filter:r,layoutMode:a,transitionDuration:e,isOriginLeft:n,packery:{gutter:0}}).isotope("layout");if(r!="*"){if(i.$el.parent().parent().find(".portfolio-filters").length>0){i.$el.parent().parent().find('.portfolio-filters ul a[data-filter="'+r+'"]').trigger("click")}else{i.$el.parent().parent().find('.portfolio-filters-inline ul a[data-filter="'+r+'"]').trigger("click")}}else{if(i.$el.parent().parent().find('.portfolio-filters-inline[data-alignment="left"]').length>0||i.$el.parent().parent().find('.portfolio-filters-inline[data-alignment="center"]').length>0){i.$el.parent().parent().find(".portfolio-filters-inline .container > ul > li:nth-child(1) a").trigger("click").addClass("active")}else{i.$el.parent().parent().find(".portfolio-filters-inline .container > ul > li:nth-child(2) a").trigger("click").addClass("active")}}if(i.$el.find(".inner-wrap").attr("data-animation")==="none"){i.$el.find(".inner-wrap").removeClass("animated")}i.loadAnimationWaypoint();t(window).on("nectar-waypoints-reinit",i.loadAnimationWaypoint.bind(i));i.masonryZindex();var s=this;setTimeout(function(){i.masonryZindex()},800);if(i.$el.parents(".full-width-content").length>0){setTimeout(function(){i.fullWidthContentColumns()},200)}t(".portfolio-loading").stop(true,true).fadeOut(200)};e.prototype.resizeHandler=function(){var t=this;this.$window.on("resize",function(){setTimeout(function(){t.reLayout();t.masonryZindex();t.portfolioCommentOrder()},30)})};e.prototype.mouseEventHandler=function(){if(this.$el.parent().parent().find(".portfolio-filters").length>0){this.$el.parent().parent().find(".portfolio-filters ul li a").on("click",this.isoClickFilter.bind(this))}else{this.$el.parent().parent().find(".portfolio-filters-inline ul li a").on("click",this.isoClickFilter.bind(this))}if(t("body.page-template-template-portfolio").length>0&&t("#page-header-wrap .portfolio-filters").length>0){t("#page-header-wrap .portfolio-filters ul li a").on("click",this.isoClickFilter.bind(this))}t("body").on("mouseenter",".portfolio-filters",function(){if(!this.onMobile){t(this).find("> ul").stop(true,true).slideDown(500,"easeOutExpo")}t(this).find("a#sort-portfolio span").html(t(this).find("a#sort-portfolio").attr("data-sortable-label"))});t("body").on("mouseleave",".portfolio-filters",function(){var e=t(this).find("a.active").html();if(typeof e=="undefined"||e.length==0){e=t(this).attr("data-sortable-label")}t(this).find("a#sort-portfolio span").html(e);if(!this.onMobile){t(this).find("> ul").stop(true,true).slideUp(500,"easeOutExpo")}});t("body").on("click",".portfolio-filters ul li a",function(){t(this).parents(".portfolio-filters").find("#sort-portfolio span").html(t(this).html())});t("body").on("click",".portfolio-filters > a#sort-portfolio",function(){return false});var e="";t(".portfolio-items > .col a[title]").on("mouseenter",function(){if(t(this).attr("title").length>0){e=t(this).attr("title");t(this).attr("title","")}});t(".portfolio-items > .col a[title]").on("mouseleave",function(){if(e.length>0){t(this).attr("title",e)}});t(".portfolio-items > .col a[title]").on("mousedown",function(){if(e.length>0){t(this).attr("title",e)}})};e.prototype.portfolioFiltersInit=function(){if(t("body").hasClass("mobile")||navigator.userAgent.match(/(iPad|IEMobile)/)){this.onMobile=true;t("body").off("mouseenter mouseleave",".portfolio-filters");this.$el.parent().parent().find(".portfolio-filters > a").on("click",function(e){if(e.originalEvent!==undefined){t(this).parents(".portfolio-filters").find("> ul").stop(true,true).slideToggle(600,"easeOutCubic")}});this.$el.parent().parent().find(".portfolio-filters ul li a").on("click",function(e){if(e.originalEvent!==undefined){t(this).parents(".portfolio-filters").find("> ul").stop(true,true).slideToggle(600,"easeOutCubic");var i=t(this).html();t(this).parents(".portfolio-filters").find("a#sort-portfolio span").html(i)}})}t('body.single-portfolio #header-outer nav > ul > li > a:contains("Portfolio")').parents("li").addClass("current-menu-item");t(".portfolio-items").find("a[href*='http://']:not([href*='"+window.location.hostname+"'])").attr("target","_blank");t(".recent_projects_widget").find("a[href*='http://']:not([href*='"+window.location.hostname+"'])").attr("target","_blank");t(".portfolio-items").find("a[href*='https://']:not([href*='"+window.location.hostname+"']):not([href*='youtube.com']):not([href*='vimeo.com'])").attr("target","_blank");t(".recent_projects_widget").find("a[href*='https://']:not([href*='"+window.location.hostname+"'])").attr("target","_blank")};e.prototype.isoClickFilter=function(e){var i;var a=this;if(window.innerWidth>690&&!navigator.userAgent.match(/(Android|iPod|iPhone|iPad|IEMobile|Opera Mini)/)){clearTimeout(i);i=setTimeout(function(){a.masonryZindex()},600)}var r=t(e.target).attr("data-filter");this.$el.isotope({filter:r}).attr("data-current-cat",r);if(this.$el.find('.inner-wrap[data-animation="none"]').length===0){this.$el.find(".col").addClass("animated-in")}t(e.target).closest("ul:not(.children)").find("li a").removeClass("active");t(e.target).addClass("active");if(t(e.target).parents(".portfolio-filters-inline").length>0){t(e.target).parents(".portfolio-filters-inline").find("#current-category").html(t(e.target).html())}if(this.$el.find('a[rel^="prettyPhoto"]').length>0){setTimeout(this.updatePrettyPhotoGallery.bind(this),170)}else{setTimeout(this.updateMagPrettyPhotoGallery.bind(this),170)}return false};e.prototype.loadAnimationWaypoint=function(){var e=t("#nectar_fullscreen_rows").length>0?"200%":"90%";var i=this;if(this.$el.find(".inner-wrap").attr("data-animation")==="none"){return}this.$el.find(".col").each(function(a){var r=t(this);if(t(this).visible(true)||t(this).parents("#nectar_fullscreen_rows").length>0){if(t(this).parents("#nectar_fullscreen_rows").length>0&&i.fullscreenSelector.length>0&&t(this).parents(i.fullscreenSelector).length==0){return true}var n=r.is('[data-masonry-type="photography"].masonry-items')?90:115;t(this).delay(n*a).queue(function(e){t(this).addClass("animated-in");e()})}else{var s=new Waypoint({element:r,handler:function(){if(r.parents(".wpb_tab").length>0&&r.parents(".wpb_tab").css("visibility")==="hidden"||r.hasClass("animated-in")){s.destroy();return}var t=r.is('[data-masonry-type="photography"].masonry-items')?85:100;setTimeout(function(){r.addClass("animated-in")},t*r.attr("data-delay-amount"));s.destroy()},offset:e})}})};e.prototype.perspectiveAnimationInit=function(){var e=t(window).scrollTop();var i=this;this.$el.css("perspective-origin","50% "+(e+t(window).height())+"px");requestAnimationFrame(a);function a(){var r=t(window).scrollTop();if(e===r){requestAnimationFrame(a);return}else{e=r;i.$el.css("perspective-origin","50% "+(e+t(window).height())+"px");requestAnimationFrame(a)}}};e.prototype.portfolioItemWidths=function(){var e=this.$el.attr("data-col-num")==="elastic";if(e){var i=Math.floor(this.$el.width());var a=4;var r=this.mediaQuerySize==="one"?1:2;if(this.mediaQuerySize==="five"){a=5}else if(this.mediaQuerySize==="four"){a=4}else if(this.mediaQuerySize==="three"){a=3}else if(this.mediaQuerySize==="two"){a=2}else if(this.mediaQuerySize==="one"){a=1}if(this.$el.is('[data-ps="6"]')&&a==5){a=4}if(e&&this.$el.is('[data-masonry-type="photography"]')&&!this.$el.hasClass("no-masonry")){if(this.mediaQuerySize==="five"){a=6}if(this.mediaQuerySize==="four"){a=5}if(this.mediaQuerySize==="three"){a=4}}if(i%a===0){this.$el.find(".elastic-portfolio-item:not(.wide):not(.wide_tall)").css("width",Math.floor(i/a)+"px");this.$el.find(".elastic-portfolio-item.wide, .elastic-portfolio-item.wide_tall").css("width",Math.floor(i/a*r)+"px")}else{var n=t(window).width()>1e3?6:3;if(this.$el.hasClass("fullwidth-constrained")&&t(window).width()>1e3){n=4}for(var s=1;s<n;s++){if((i-s)%a===0){this.$el.find(".elastic-portfolio-item:not(.wide):not(.wide_tall)").css("width",(i-s)/a+"px");this.$el.find(".elastic-portfolio-item.wide, .elastic-portfolio-item.wide_tall").css("width",(i-s)/a*r+"px")}}}}};e.prototype.masonryZindex=function(){if(t('body .portfolio-items:not(".carousel") > .col').length>0&&t('body .portfolio-items:not(".carousel") > .col').offset().left){var e=this;t('body .portfolio-items:not(".carousel")').each(function(){var i={};var a={};var r=t(this);t(this).find("> .col").each(function(){var e=t(this).offset();e=e.left;i[t(this).index()]=e;t(this).css("z-index",Math.abs(Math.floor(t(this).offset().left/20)))});var n=jQuery.map(i,function(t){return t});n=e.removeDuplicates(n);n.sort(function(t,e){return t-e});for(var s=0;s<n.length;s++){a[n[s]]=s}jQuery.each(i,function(t,e){var i;var n=e;jQuery.each(a,function(t,e){if(n===t){i=e}});r.find("> .col:eq("+t+")").attr("data-delay-amount",i)})})}};e.prototype.removeDuplicates=function(t){var e;var i=t.length;var a=[];var r={};for(e=0;e<i;e++){r[t[e]]=0}for(e in r){a.push(e)}return a};e.prototype.beforeReLayout=function(){var e=this;clearTimeout(this.clearIsoAnimation);this.$el.find(".col").addClass("no-transition");this.clearIsoAnimation=setTimeout(function(){e.$el.find(".col").removeClass("no-transition")},700);if(window.innerWidth>1600){if(this.$el.hasClass("fullwidth-constrained")){if(this.$el.is('[data-masonry-type="photography"]')){this.mediaQuerySize="three"}else{this.mediaQuerySize="four"}}else{if(this.$el.hasClass("constrain-max-cols")){this.mediaQuerySize="four"}else{this.mediaQuerySize="five"}}}else if(window.innerWidth<=1600&&window.innerWidth>1300){if(this.$el.hasClass("fullwidth-constrained")){if(this.$el.is('[data-masonry-type="photography"]')){this.mediaQuerySize="three"}else{this.mediaQuerySize="four"}}else{this.mediaQuerySize="four"}}else if(window.innerWidth<=1300&&window.innerWidth>990){if(this.$el.hasClass("constrain-max-cols")){this.mediaQuerySize="four"}else{this.mediaQuerySize="three"}}else if(window.innerWidth<=990&&window.innerWidth>470){this.mediaQuerySize="two"}else if(window.innerWidth<=470){this.mediaQuerySize="one"}if(t("#boxed").length>0){if(window.innerWidth>1300){this.mediaQuerySize="four"}else if(window.innerWidth<1300&&window.innerWidth>990){if(this.$el.hasClass("constrain-max-cols")){this.mediaQuerySize="four"}else{this.mediaQuerySize="three"}}else if(window.innerWidth<990){this.mediaQuerySize="one"}}this.portfolioItemWidths();if(!this.$el.is('[data-bypass-cropping="true"]')){if(this.$el.find('.col.elastic-portfolio-item[class*="regular"]:visible').length>0||this.$el.find('.col.elastic-portfolio-item[class*="wide"]:visible').length>0||this.$el.find('.col.elastic-portfolio-item[class*="tall"]:visible').length>0||this.$el.find('.col.elastic-portfolio-item[class*="wide_tall"]:visible').length>0){var i=this.$el.is('[data-gutter*="px"]')&&this.$el.attr("data-gutter").length>0&&this.$el.attr("data-gutter")!="none"?parseInt(this.$el.attr("data-gutter")):0;var a=window.innerWidth>470?2:1;var r="regular";if(this.$el.find('.col.elastic-portfolio-item[class*="regular"]:visible').length===0&&this.$el.find(".col.elastic-portfolio-item.wide:visible").length>0){r="wide"}else if(this.$el.find('.col.elastic-portfolio-item[class*="regular"]:visible').length===0&&this.$el.find(".col.elastic-portfolio-item.wide_tall:visible").length>0){r="wide_tall";a=1}else if(this.$el.find('.col.elastic-portfolio-item[class*="regular"]:visible').length===0&&this.$el.find(".col.elastic-portfolio-item.tall:visible").length>0){r="tall";a=1}this.$el.find(".col.elastic-portfolio-item."+r+" img").css("height","auto");var n=this.$el.find(".col.elastic-portfolio-item."+r+":visible img").height();this.$el.find('.col.elastic-portfolio-item[class*="tall"] img, .col.elastic-portfolio-item.wide img, .col.elastic-portfolio-item.regular img').removeClass("auto-height");this.$el.find('.col.elastic-portfolio-item[class*="tall"] img:not(.custom-thumbnail)').css("height",n*a+i*2);if(r==="regular"||r==="wide"){this.$el.find(".col.elastic-portfolio-item.wide img:not(.custom-thumbnail), .col.elastic-portfolio-item.regular img:not(.custom-thumbnail)").css("height",n)}else{this.$el.find(".col.elastic-portfolio-item.wide img:not(.custom-thumbnail), .col.elastic-portfolio-item.regular img:not(.custom-thumbnail)").css("height",n/2-i*2)}this.$el.find('.col.elastic-portfolio-item[class*="tall"] .parallaxImg').css("height",n*a+parseInt(this.$el.find(".col.elastic-portfolio-item").css("padding-bottom"))*2);if(r==="regular"||r==="wide"){this.$el.find(".col.elastic-portfolio-item.regular .parallaxImg, .col.elastic-portfolio-item.wide .parallaxImg").css("height",n)}else{this.$el.find(".col.elastic-portfolio-item.regular .parallaxImg, .col.elastic-portfolio-item.wide .parallaxImg").css("height",n/2-i*2)}}else{this.$el.find('.col.elastic-portfolio-item[class*="tall"] img, .col.elastic-portfolio-item.wide img, .col.elastic-portfolio-item.regular img').addClass("auto-height")}}if(this.$el.hasClass("no-masonry")&&this.$el.find(".col:first:visible").length>0&&this.$el.parents(".wpb_gallery").length===0){if(!this.$el.is('[data-ps="9"]')&&!this.$el.is('[data-bypass-cropping="true"]')){this.$el.find(".col img").css("height","auto");var n=this.$el.find(".col:first:visible img").height();this.$el.find(".col img:not(.custom-thumbnail)").css("height",n);this.$el.find(".col .parallaxImg").css("height",n)}}};e.prototype.reLayout=function(){this.beforeReLayout();if(this.$el.isotope()){this.$el.isotope("layout")}};e.prototype.updatePrettyPhotoGallery=function(){if(this.$el.find('a[rel^="prettyPhoto"]').length>0){var t=Math.floor(Math.random()*1e4);var e=this.$el.attr("data-current-cat");this.$el.find(".col"+e).find('a[rel^="prettyPhoto"]').attr("rel","prettyPhoto["+t+"_sorted]")}};e.prototype.updateMagPrettyPhotoGallery=function(){var e=this.$el.attr("data-current-cat");var i=Math.floor(Math.random()*1e4);if(this.$el.is('[data-lightbox-only="true"]')){this.$el.find(".col").each(function(){t(this).find("a.gallery").removeClass("gallery").removeClass("magnific");if(t(this).is(e)){if(t(this).find(".parallaxImg-wrap").length>0){if(t('body[data-ls="fancybox"]').length>0){t(this).find('.work-item > a:not([target="_blank"])').attr("data-fancybox","group_"+i)}else{t(this).find('.work-item > a:not([target="_blank"])').addClass("gallery").addClass("magnific")}}else{if(t('body[data-ls="fancybox"]').length>0){t(this).find('.work-item a:not([target="_blank"])').attr("data-fancybox","group_"+i)}else{t(this).find('.work-item a:not([target="_blank"])').addClass("gallery").addClass("magnific")}}}})}else if(this.$el.find(".work-item.style-1").length>0){this.$el.find(".col").each(function(){t(this).find("a.gallery").removeClass("gallery").removeClass("magnific");if(t(this).is(e)){if(t('body[data-ls="fancybox"]').length>0){t(this).find(".work-info .vert-center a:first-of-type").attr("data-fancybox","group_"+i)}else{t(this).find(".work-info .vert-center a:first-of-type").addClass("gallery").addClass("magnific")}}})}};e.prototype.portfolioAccentColor=function(){this.$el.find(".col").each(function(){if(t(this).has("[data-project-color]")){t(this).find(".work-info-bg, .bottom-meta").css("background-color",t(this).attr("data-project-color"));t(this).find(".parallaxImg-rendered-layer .bg-overlay").css("border-color",t(this).attr("data-project-color"))}})};e.prototype.isotopeCatSelection=function(){var e=[];var i=0;this.$el.parent().parent().find("div[class^=portfolio-filters] ul li").each(function(a){if(t(this).find("a").length>0){e[i]=t(this).find("a").attr("data-filter").substring(1);i++}});e.shift();var a="";var r=this;this.$el.find("> div").each(function(){a+=t(this).attr("data-project-cat")});a=a.split(" ");a.pop();var n=[];t.each(a,function(e,i){if(t.inArray(i,n)===-1){n.push(i)}});var s;if(this.$el.is("[data-categories-to-show]")&&this.$el.attr("data-categories-to-show").length!=0&&this.$el.attr("data-categories-to-show")!="all"){s=this.$el.attr("data-categories-to-show").replace(/,/g," ");s=s.split(" ");if(!this.$el.hasClass("infinite_scroll")){this.$el.removeAttr("data-categories-to-show")}}else{s=n}var o=[];jQuery.grep(e,function(t){if(jQuery.inArray(t,n)==-1)o.push(t);if(jQuery.inArray(t,s)==-1)o.push(t)});if(o.length!=0){this.$el.parent().parent().find("div[class^=portfolio-filters] ul li").each(function(){if(t(this).find("a").length>0){if(jQuery.inArray(t(this).find("a").attr("data-filter").substring(1),o)!=-1){if(t(this).find("> ul.children").length>0){t(this).find("> a").hide()}else{t(this).hide()}}else{t(this).show()}}})}};e.prototype.portfolioCommentOrder=function(){if(t("body").hasClass("mobile")&&t("body").hasClass("single-portfolio")&&t("#respond").length>0){t("#sidebar").insertBefore(".comments-section")}else if(t("body").hasClass("single-portfolio")&&t("#respond").length>0){t("#sidebar").insertAfter(".post-area")}};function i(e){this.$el=e;this.rotationSpeed=e.attr("data-autorotate").length>0?parseInt(e.attr("data-autorotate")):false;this.rotationInterval=null;this.$window=t(window);this.splitLineText();this.positionFix();this.sliderCalcs();this.sliderInit();this.resizeHandler()}i.prototype.resizeHandler=function(){t(window).resize(this.sliderCalcs.bind(this));t(window).resize(this.splitLineText.bind(this))};i.prototype.positionFix=function(){if(this.$el.parents(".span_12").find("> .wpb_column").length>1){var t=this.$el.clone();var e=this.$el.parents(".span_12");this.$el.remove();e.prepend(t);this.$el=t}};i.prototype.sliderCalcs=function(){var e=t(".body-border-top").length>0&&t(window).width()>1e3?t(".body-border-top").height():0;var i=typeof window.vc_iframe==="undefined"?false:true;if(i){if(this.$el.parents(".wpb_row").parent().index()>1){this.$el.parents(".first-section").removeClass("first-section")}}if(this.$el.parents(".first-section").length>0){this.$el.css("height",t(window).height()-this.$el.offset().top-e)}else{this.$el.css("height",t(window).height())}};i.prototype.sliderRotate=function(){if(t("body.vc_editor").length>0){return}var e=this.$el.find(".project-slides").length>0?".dot-nav > span":".controls > li";var i=this.$el.find(".project-slides").length>0?"span":" li";var a=this.$el.find(e).length;var r=this.$el.find(e+".active").index();if(r+1===a){this.$el.find(e+":first-child").trigger("click")}else{this.$el.find(e+".active").next(i).trigger("click")}};i.prototype.sliderResetRotate=function(){clearInterval(this.rotationInterval);if(this.rotationSpeed!=0){var t=this.rotationSpeed<100?4e3:this.rotationSpeed;this.rotationInterval=setInterval(this.sliderRotate.bind(this),t)}};i.prototype.splitLineText=function(){var e=this.$el.find(".project-slides").length>0?".project-slide":".nectar-recent-post-slide";var i=this.$el.find(".project-slides").length>0?".project-info h1":".inner-wrap h2 a";this.$el.find(e).each(function(e){t(this).find(i).each(function(){var e=t(this).text();e=e.trim();e=e.split(" ");t(this)[0].innerHTML="";for(var i=0;i<e.length;i++){t(this)[0].innerHTML+="<span>"+e[i]+"</span> "}});t(this).find(i+" > span").wrapInner('<span class="inner" />')})};i.prototype.sliderInit=function(){var e=this.$el.find(".project-slide").length;var i=this;if(this.rotationSpeed!=0){var a=this.rotationSpeed<100?4e3:this.rotationSpeed;this.rotationInterval=setInterval(this.sliderRotate.bind(this),a)}this.$el.find(".zoom-slider-controls .next").on("click",function(){var a=t(this);if(!a.parent().hasClass("timeout")){setTimeout(function(){a.parent().removeClass("timeout")},1150)}if(t(this).parent().hasClass("timeout")){return false}t(this).parent().addClass("timeout");i.sliderResetRotate();var r=t(this).parents(".nectar_fullscreen_zoom_recent_projects").find(".project-slide.current");var n=t(this).parents(".nectar_fullscreen_zoom_recent_projects");n.find(".project-slide").removeClass("next").removeClass("prev");n.find(".project-slide").each(function(i){if(i<r.index()+1&&r.index()+1<e){t(this).addClass("prev")}else{t(this).addClass("next")}});if(r.index()+1===e){n.find(".project-slide:first-child").addClass("no-trans")}setTimeout(function(){if(r.index()+1===e){n.find(".project-slide:first-child").removeClass("no-trans").removeClass("next").removeClass("prev").addClass("current");n.find(".project-slide:last-child").removeClass("next").removeClass("current").addClass("prev")}else{r.next(".project-slide").removeClass("next").removeClass("prev").addClass("current");r.removeClass("current").addClass("prev")}if(n.find(".dot-nav").length>0){n.find(".dot-nav span.active").removeClass("active");n.find(".dot-nav span:nth-child("+(n.find(".project-slide.current").index()+1)+")").addClass("active")}},30);return false});this.$el.find(".zoom-slider-controls .prev").on("click",function(){var e=t(this);if(!e.parent().hasClass("timeout")){setTimeout(function(){e.parent().removeClass("timeout")},1150)}if(t(this).parent().hasClass("timeout")){return false}t(this).parent().addClass("timeout");i.sliderResetRotate();var a=t(this).parents(".nectar_fullscreen_zoom_recent_projects").find(".project-slide.current");var r=t(this).parents(".nectar_fullscreen_zoom_recent_projects");r.find(".project-slide").removeClass("next").removeClass("prev");r.find(".project-slide").each(function(e){if(e<a.index()||a.index()==0){t(this).addClass("prev")}else{t(this).addClass("next")}});if(a.index()==0){r.find(".project-slide:last-child").addClass("no-trans")}setTimeout(function(){if(a.index()==0){r.find(".project-slide:last-child").removeClass("no-trans").removeClass("next").removeClass("prev").addClass("current");r.find(".project-slide:first-child").removeClass("next").removeClass("prev").removeClass("current").addClass("next")}else{a.prev(".project-slide").removeClass("next").removeClass("prev").addClass("current");a.removeClass("current").addClass("next")}if(r.find(".dot-nav").length>0){r.find(".dot-nav span.active").removeClass("active");r.find(".dot-nav span:nth-child("+(r.find(".project-slide.current").index()+1)+")").addClass("active")}},30);return false});this.$el.find("> .normal-container > .dot-nav").remove();this.$el.find("> .normal-container").append('<div class="dot-nav"></div>');for(var r=0;r<e;r++){if(r==0){this.$el.find(".dot-nav").append('<span class="dot active"><span></span></span>')}else{this.$el.find(".dot-nav").append('<span class="dot"><span></span></span>')}}var n=1;this.$el.find(".dot-nav > span").on("click",function(){if(t(this).hasClass("active")){return}var e=t(this);if(!e.parent().hasClass("timeout")){setTimeout(function(){e.parent().removeClass("timeout")},1150)}if(t(this).parent().hasClass("timeout")){return}t(this).parent().addClass("timeout");i.sliderResetRotate();t(this).parent().find("span.active").removeClass("active");t(this).addClass("active");n=t(this).index()+1;var a=t(this).parents(".nectar_fullscreen_zoom_recent_projects").find(".project-slide.current");var r=t(this).parents(".nectar_fullscreen_zoom_recent_projects");var s=a.index()+1;r.find(".project-slide").removeClass("next").removeClass("prev");r.find(".project-slide").each(function(e){if(e<n-1){t(this).addClass("prev")}else{t(this).addClass("next")}});if(s>n){r.find(".project-slide").eq(n-1).addClass("no-trans").addClass("prev").removeClass("next");setTimeout(function(){r.find(".project-slide").eq(n-1).removeClass("no-trans").removeClass("next").removeClass("prev").addClass("current");a.removeClass("current").addClass("next")},30)}else{r.find(".project-slide").eq(n-1).addClass("no-trans").addClass("next").removeClass("prev");setTimeout(function(){r.find(".project-slide").eq(n-1).removeClass("no-trans").removeClass("next").removeClass("prev").addClass("current");a.removeClass("current").addClass("prev")},30)}})};function a(t){this.$el=t;this.carouselInit();this.resizeHandler()}a.prototype.resizeHandler=function(){t(window).resize(this.carouselHeightCalcs.bind(this))};a.prototype.carouselInit=function(){var e=this.$el;var i=this;var a=this.$el.parents(".carousel-wrap").attr("data-full-width")==="true"?"auto":3;var r=this.$el.parents(".carousel-wrap").attr("data-full-width")==="true"?"auto":"";var n=this.$el.parents(".carousel-wrap").attr("data-full-width")==="true"?500:453;var s,o;var l=this.$el.attr("data-autorotate")==="true"?true:false;var h,f;if(t("body.ascend").length>0&&this.$el.parents(".carousel-wrap").attr("data-full-width")!=="true"||t("body.material").length>0&&this.$el.parents(".carousel-wrap").attr("data-full-width")!=="true"){if(this.$el.find("li").length%3===0){h=true;f=true}else{h=false;f=true}}else{h=true;f=true}parseInt(this.$el.attr("data-scroll-speed"))?s=parseInt(this.$el.attr("data-scroll-speed")):s=700;this.$el.is("[data-easing]")?o=this.$el.attr("data-easing"):o="linear";this.$el.find(".col").each(function(){if(t(this).has("[data-project-color]")){t(this).find(".work-info-bg, .bottom-meta").css("background-color",t(this).attr("data-project-color"))}});var d=e;if(e.find("img").length===0){d=t("body")}imagesLoaded(d,function(){e.carouFredSel({circular:h,infinite:f,height:"auto",responsive:true,items:{width:n,visible:{min:1,max:a}},swipe:{onTouch:true,onMouse:true,options:{excludedElements:"button, input, select, textarea, .noSwipe",tap:function(e,i){if(t(i).attr("href")&&!t(i).is('[target="_blank"]')&&!t(i).is('[data-fancybox^="group_"]')&&!t(i).is('[rel^="prettyPhoto"]')&&!t(i).is(".magnific-popup")&&!t(i).is(".magnific")){window.open(t(i).attr("href"),"_self")}}},onBefore:function(){e.find(".work-item").trigger("mouseleave");e.find(".work-item .work-info a").trigger("mouseup")}},scroll:{items:r,easing:o,duration:s,onBefore:function(i){if(t("body.ascend").length>0&&e.parents(".carousel-wrap").attr("data-full-width")!="true"||t("body.material").length>0&&e.parents(".carousel-wrap").attr("data-full-width")!="true"){e.parents(".carousel-wrap").find(".item-count .total").html(Math.ceil(e.find("> li").length/e.triggerHandler("currentVisible").length))}},onAfter:function(i){if(t("body.ascend").length>0&&e.parents(".carousel-wrap").attr("data-full-width")!="true"||t("body.material").length>0&&e.parents(".carousel-wrap").attr("data-full-width")!="true"){e.parents(".carousel-wrap").find(".item-count .current").html(e.triggerHandler("currentPage")+1);e.parents(".carousel-wrap").find(".item-count .total").html(Math.ceil(e.find("> li").length/e.triggerHandler("currentVisible").length))}}},prev:{button:function(){return e.parents(".carousel-wrap").find(".carousel-prev")}},next:{button:function(){return e.parents(".carousel-wrap").find(".carousel-next")}},auto:{play:l}},{transition:true}).animate({"opacity":1},1300);e.parents(".carousel-wrap").wrap('<div class="carousel-outer">');if(e.parents(".carousel-wrap").attr("data-full-width")==="true"){e.parents(".carousel-outer").css("overflow","visible")}if(t("body.ascend").length>0&&e.parents(".carousel-wrap").attr("data-full-width")!="true"||t("body.material").length>0&&e.parents(".carousel-wrap").attr("data-full-width")!="true"){t('<div class="item-count"><span class="current">1</span>/<span class="total">'+e.find("> li").length/e.triggerHandler("currentVisible").length+"</span></div>").insertAfter(e.parents(".carousel-wrap").find(".carousel-prev"))}e.addClass("finished-loading");i.carouselHeightCalcs()})};a.prototype.carouselHeightCalcs=function(){if(!this.$el.hasClass("finished-loading")){return}var e=this;var i=this.$el.parents(".carousel-wrap").attr("data-full-width")==="true"&&this.$el.find(".style-2, .style-3, .style-4").length>0?0:28;var a=0;this.$el.find("> li").each(function(){t(this).find(".work-meta").height()>a?a=t(this).find(".work-meta").height():a=a});setTimeout(function(){e.$el.parents(".caroufredsel_wrapper").css({"height":e.$el.find(".work-item").outerHeight()+a+i-2+"px"})},30);if(t("body.ascend").length>0&&this.$el.parents(".carousel-wrap").attr("data-full-width")!="true"||t("body.material").length>0&&this.$el.parents(".carousel-wrap").attr("data-full-width")!="true"){this.$el.parents(".carousel-wrap").find(".item-count .current").html(Math.ceil((this.$el.triggerHandler("currentPosition")+1)/this.$el.triggerHandler("currentVisible").length));this.$el.parents(".carousel-wrap").find(".item-count .total").html(Math.ceil(this.$el.find("> li").length/this.$el.triggerHandler("currentVisible").length))}};window.SalientPortfolio=e;window.SalientRecentProjectsFullScreen=i;window.SalientRecentProjectsCarousel=a})(jQuery);jQuery.easing["jswing"]=jQuery.easing["swing"];jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(t,e,i,a,r){return jQuery.easing[jQuery.easing.def](t,e,i,a,r)},easeInQuad:function(t,e,i,a,r){return a*(e/=r)*e+i},easeOutQuad:function(t,e,i,a,r){return-a*(e/=r)*(e-2)+i},easeInOutQuad:function(t,e,i,a,r){if((e/=r/2)<1)return a/2*e*e+i;return-a/2*(--e*(e-2)-1)+i},easeInCubic:function(t,e,i,a,r){return a*(e/=r)*e*e+i},easeOutCubic:function(t,e,i,a,r){return a*((e=e/r-1)*e*e+1)+i},easeInOutCubic:function(t,e,i,a,r){if((e/=r/2)<1)return a/2*e*e*e+i;return a/2*((e-=2)*e*e+2)+i},easeInQuart:function(t,e,i,a,r){return a*(e/=r)*e*e*e+i},easeOutQuart:function(t,e,i,a,r){return-a*((e=e/r-1)*e*e*e-1)+i},easeInOutQuart:function(t,e,i,a,r){if((e/=r/2)<1)return a/2*e*e*e*e+i;return-a/2*((e-=2)*e*e*e-2)+i},easeInQuint:function(t,e,i,a,r){return a*(e/=r)*e*e*e*e+i},easeOutQuint:function(t,e,i,a,r){return a*((e=e/r-1)*e*e*e*e+1)+i},easeInOutQuint:function(t,e,i,a,r){if((e/=r/2)<1)return a/2*e*e*e*e*e+i;return a/2*((e-=2)*e*e*e*e+2)+i},easeInSine:function(t,e,i,a,r){return-a*Math.cos(e/r*(Math.PI/2))+a+i},easeOutSine:function(t,e,i,a,r){return a*Math.sin(e/r*(Math.PI/2))+i},easeInOutSine:function(t,e,i,a,r){return-a/2*(Math.cos(Math.PI*e/r)-1)+i},easeInExpo:function(t,e,i,a,r){return e==0?i:a*Math.pow(2,10*(e/r-1))+i},easeOutExpo:function(t,e,i,a,r){return e==r?i+a:a*(-Math.pow(2,-10*e/r)+1)+i},easeInOutExpo:function(t,e,i,a,r){if(e==0)return i;if(e==r)return i+a;if((e/=r/2)<1)return a/2*Math.pow(2,10*(e-1))+i;return a/2*(-Math.pow(2,-10*--e)+2)+i},easeInCirc:function(t,e,i,a,r){return-a*(Math.sqrt(1-(e/=r)*e)-1)+i},easeOutCirc:function(t,e,i,a,r){return a*Math.sqrt(1-(e=e/r-1)*e)+i},easeInOutCirc:function(t,e,i,a,r){if((e/=r/2)<1)return-a/2*(Math.sqrt(1-e*e)-1)+i;return a/2*(Math.sqrt(1-(e-=2)*e)+1)+i},easeInElastic:function(t,e,i,a,r){var n=1.70158;var s=0;var o=a;if(e==0)return i;if((e/=r)==1)return i+a;if(!s)s=r*.3;if(o<Math.abs(a)){o=a;var n=s/4}else var n=s/(2*Math.PI)*Math.asin(a/o);return-(o*Math.pow(2,10*(e-=1))*Math.sin((e*r-n)*2*Math.PI/s))+i},easeOutElastic:function(t,e,i,a,r){var n=1.70158;var s=0;var o=a;if(e==0)return i;if((e/=r)==1)return i+a;if(!s)s=r*.3;if(o<Math.abs(a)){o=a;var n=s/4}else var n=s/(2*Math.PI)*Math.asin(a/o);return o*Math.pow(2,-10*e)*Math.sin((e*r-n)*2*Math.PI/s)+a+i},easeInOutElastic:function(t,e,i,a,r){var n=1.70158;var s=0;var o=a;if(e==0)return i;if((e/=r/2)==2)return i+a;if(!s)s=r*.3*1.5;if(o<Math.abs(a)){o=a;var n=s/4}else var n=s/(2*Math.PI)*Math.asin(a/o);if(e<1)return-.5*o*Math.pow(2,10*(e-=1))*Math.sin((e*r-n)*2*Math.PI/s)+i;return o*Math.pow(2,-10*(e-=1))*Math.sin((e*r-n)*2*Math.PI/s)*.5+a+i},easeInBack:function(t,e,i,a,r,n){if(n==undefined)n=1.70158;return a*(e/=r)*e*((n+1)*e-n)+i},easeOutBack:function(t,e,i,a,r,n){if(n==undefined)n=1.70158;return a*((e=e/r-1)*e*((n+1)*e+n)+1)+i},easeInOutBack:function(t,e,i,a,r,n){if(n==undefined)n=1.70158;if((e/=r/2)<1)return a/2*e*e*(((n*=1.525)+1)*e-n)+i;return a/2*((e-=2)*e*(((n*=1.525)+1)*e+n)+2)+i},easeInBounce:function(t,e,i,a,r){return a-jQuery.easing.easeOutBounce(t,r-e,0,a,r)+i},easeOutBounce:function(t,e,i,a,r){if((e/=r)<1/2.75){return a*7.5625*e*e+i}else if(e<2/2.75){return a*(7.5625*(e-=1.5/2.75)*e+.75)+i}else if(e<2.5/2.75){return a*(7.5625*(e-=2.25/2.75)*e+.9375)+i}else{return a*(7.5625*(e-=2.625/2.75)*e+.984375)+i}},easeInOutBounce:function(t,e,i,a,r){if(e<r/2)return jQuery.easing.easeInBounce(t,e*2,0,a,r)*.5+i;return jQuery.easing.easeOutBounce(t,e*2-r,0,a,r)*.5+a*.5+i}});!function(t){var e=t(window);t.fn.visible=function(t,i,a){if(!(this.length<1)){var r=this.length>1?this.eq(0):this,n=r.get(0),s=e.width(),o=e.height(),a=a?a:"both",l=i===!0?n.offsetWidth*n.offsetHeight:!0;if("function"==typeof n.getBoundingClientRect){var h=n.getBoundingClientRect(),f=h.top>=0&&h.top<o,d=h.bottom>0&&h.bottom<=o,c=h.left>=0&&h.left<s,u=h.right>0&&h.right<=s,p=t?f||d:f&&d,m=t?c||u:c&&u;if("both"===a)return l&&p&&m;if("vertical"===a)return l&&p;if("horizontal"===a)return l&&m}else{var g=e.scrollTop(),v=g+o,w=e.scrollLeft(),y=w+s,$=r.offset(),C=$.top,b=C+r.height(),x=$.left,_=x+r.width(),I=t===!0?b:C,j=t===!0?C:b,M=t===!0?_:x,Q=t===!0?x:_;if("both"===a)return!!l&&v>=j&&I>=g&&y>=Q&&M>=w;if("vertical"===a)return!!l&&v>=j&&I>=g;if("horizontal"===a)return!!l&&y>=Q&&M>=w}}}}(jQuery);jQuery(document).ready(function(t){"use strict";if(nectar_theme_info.using_salient!="true"){var e=[];t(".portfolio-items:not(.carousel)").each(function(i){t(this).attr("instance",i);t(this).parent().parent().find("div[class^=portfolio-filters]").attr("instance",i);e[i]=new SalientPortfolio(t(this))});var i=[];t(".nectar_fullscreen_zoom_recent_projects").each(function(e){i[e]=new SalientRecentProjectsFullScreen(t(this))});var a=[];t("ul.portfolio-items.carousel").each(function(e){a[e]=new SalientRecentProjectsCarousel(t(this))})}});